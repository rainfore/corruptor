<style>
body {background-color: white;}
/*.g-col {display: inline-block;}*/
/*.g-col-6 {width: 49%;}*/
.g-row {border-bottom: 1px solid #ccc; overflow: auto;}
canvas {border: 1px solid blue; margin: 5px; background: yellow;}
.g-row span {vertical-align: top; margin-top: 5px; display: inline-block;}
canvas + div {width: 300px; margin: 5px; float: right; font-size: 12px; font-family: 'Liberation Mono', Menlo, Courier, monospace;}
</style>
<div class="g-col g-col-6"></div>
<div id="g-testctn" class="g-col g-col-6"></div>
<!-- <p><img id="image" src="button3.png" /></p>
<p><a onclick="saveImage(this)" download="test.png">保存</a></p>
 -->
<script src="../../dist/corruptor.js"></script>
<script>
var testContainer = document.getElementById('g-testctn');

for(var i = 1; i <= 10; i++) {
    var $gRow = document.createElement('div');
    $gRow.className = 'g-row';
    testContainer.appendChild($gRow);

    (function(container, index) {
        var $number = document.createElement('span');
        $number.innerText = index + '. ';
        container.appendChild($number);

        var corruptor = new Corruptor('button' + index + '.png', null, function(ruleset) {
            console.log(index + ' ================= end');

            corruptor.imageDatas.forEach(function(imageData) {
                container.appendChild(Corruptor.getCanvasFromImageData(imageData));
            });

            var $text = document.createElement('div');
            $text.innerHTML = Object.keys(ruleset).map(function(key) {
                return key + ': ' + ruleset[key] + ';';
            }).join('<br>');
            container.appendChild($text);
        });
    })($gRow, i);
}
</script>